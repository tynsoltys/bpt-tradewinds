<article class="trade-card rounded-lg shadow-lg p-8 mb-4 bg-brand-white grid ml-8">
    {# TRADE SETUP  #}
    <div class="grid grid-cols-12">
        <div class="setup-details col-span-2 row-span-1 ">
            <h2 class="flex items-center" title="{{trade.symbol.underlying_name}}"><a href="" class="mr-2 symbol text-5xl font-black tracking-wide">{{trade.ticker_symbol}}</a>  {{ include ('partials/trade-types/trade-type-pill_small.twig') }}</h2>
            <p class="text-xl font-semibold block flex-none pr-3">{{trade.ticker_symbol.underlying_name}}</p>

        </div>

        <div class="col-span-4 flex flex-wrap flex-row">
            <div class="w-1/2">
                <p class="subheading">POSTED ON</p>
                <p class="meta">{{trade.latest_update_date}}</p>
            </div>
            <div class="w-1/2">
                <p class="subheading">LAST TRADED</p>
                <p class="meta">${{trade.acb_at_update}}</p>

            </div>
            <div class="w-1/2 mt-3">
                <h4 class="subheading">outlook</h4>
                <p class="meta text-{{trade.outlook.color_code}}"><i class="fas fa-{{trade.outlook.icon_code}}"></i> {{trade.outlook}}</p>
            </div>

            <div class="w-1/2 mt-3">
                <h4 class="subheading">first target</h4>
                <p class="meta block">${{trade.first_target}}</p>

            </div>
            <div class="w-1/2 mt-3">
                <h4 class="subheading">STRATEGY</h4>
                <p class="meta">{{trade.trade_strategy}}</p>
            </div>






            <div class="w-1/2 mt-3">
                <h4 class="subheading">Profit taking Zone</h4>
                <p class="meta block">${{trade.profit_zone_start}}
                    {% if trade.outlook.slug == 'bullish' %}
                    <i class="far fa-arrow-right" style="transform: rotate(45deg)"></i>
                {% elseif trade.outlook.slug == 'bearish' %}
                    <i class="far fa-arrow-right" style="transform: rotate(-45deg)"></i>
                {% elseif trade.outlook.slug == 'neutral' %}
                    <i class="far fa-arrow-right"></i>
                {% else %}
                    <i class="far fa-arrow-right"></i>
                {% endif %}

                ${{trade.profit_zone_end}}
            </p>
            </div>

            <div class="w-full">
                <p class="meta text-sm normal-case font-normal mt-4 mr-8">{{trade.trade_description}}</p>

                <div class="mt-4">
                    {% if trade.bot_witt_link.url is not empty %}
                        <a href="{{trade.bot_witt_link.url}}" target="_blank" class="btn btn-accent text-right">
                            <i class="fas fa-video ml-1"></i> WITT SEGMENT
                        </a>
                    {% else %}
                        <span class="text-gray-medium italic tect-center block">No WITT reference.</span>
                    {% endif %}
                </div>

            </div>

        </div>
        <div class="col-span-4">


            <div x-data="{ imgModal : false, imgModalSrc : '', imgModalDesc : '' }">
                <template @img-modal.window="imgModal = true; imgModalSrc = $event.detail.imgModalSrc; imgModalDesc = $event.detail.imgModalDesc;" x-if="imgModal">
                  <div x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform scale-90" x-transition:enter-end="opacity-100 transform scale-100" x-transition:leave="transition ease-in duration-300" x-transition:leave-start="opacity-100 transform scale-100" x-transition:leave-end="opacity-0 transform scale-90" x-on:click.away="imgModalSrc = ''" class="p-2 fixed w-full h-100 inset-0 z-50 overflow-hidden flex justify-center items-center bg-brand-black bg-opacity-75">
                    <div @click.away="imgModal = ''" class="flex flex-col max-w-3xl max-h-full overflow-auto">
                      <div class="z-50">
                        <button @click="imgModal = ''" class="float-right pt-2 pr-2 outline-none focus:outline-none">
                          <svg class="fill-current text-white " xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
                            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z">
                            </path>
                          </svg>
                        </button>
                      </div>
                      <div class="p-2">
                        <img :alt="imgModalSrc" class="object-contain h-1/2-screen" :src="imgModalSrc">
                        <p x-text="imgModalDesc" class="text-center text-white"></p>
                      </div>
                    </div>
                  </div>
                </template>
            </div>

              <div x-data="{}" class="">
                <div class="flex">
                  <div class="">
                    <div class=" ">
                      <a @click="$dispatch('img-modal', {  imgModalSrc: '{{trade.setup_chart.url}}', imgModalDesc: '{{trade.setup_chart.text}}' })" class="cursor-pointer">
                        <img alt="Placeholder" class="object-fit w-full shadow-lg" src="{{trade.setup_chart.url}}">
                      </a>
                    </div>
                  </div>
                </div>
              </div>


        </div>
        <div class="col-span-2 flex justify-end ">
            <h4 class="">{{ include ('partials/trade-flags/trade-flag-pill_medium.twig') }}</h4>
        </div>


    </div>
</article>

