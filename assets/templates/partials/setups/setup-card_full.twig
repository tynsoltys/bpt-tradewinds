


<article class="trade-card rounded-lg shadow-lg p-8 mb-4 bg-brand-white grid grow-rows-full grid-cols-12">
    {# TRADE SETUP  #}

    <div class="grid grid-cols-full col-span-12 ">
        <div class="setup-details col-span-1 row-span-2 flex flex-wrap items-center">
            <h2 class="flex items-center" title="{{trade.underlying_name}}"><a href="" class="mr-2 symbol text-5xl font-black tracking-wide">{{trade.ticker_symbol}}</a>  {{ include ('partials/trade-types/trade-type-pill_small.twig') }}</h2>
            <p class="w-full text-xl font-semibold block">{{trade.underlying_name}}</p>

        </div>
        <div class="col-span-1">
            <p class="subheading">LAST ACTIVITY</p>
            <p class="meta">{{trade.latest_update_date}}</p>
        </div>

        <div class="col-span-1">
            <h4 class="subheading">outlook</h4>
            <p class="meta text-{{trade.outlook.color_code}}"><i class="fas fa-{{trade.outlook.icon_code}}"></i> {{trade.outlook}}</p>

        </div>
        <div class="col-span-1">
            <p class="subheading">acb at update</p>
            <p class="meta">${{trade.acb_at_update}}</p>
        </div>
        <div class="">
            <h4 class="col-span-1 subheading">STRATEGY</h4>
            <p class="meta">{{trade.trade_strategy}}</p>
        </div>

        <div class="col-span-1 flex justify-end items-center">
            <h4 class="">{{ include ('partials/trade-flags/trade-flag-pill_medium.twig') }}</h4>
        </div>
    </div>

    <div class="grid grid-cols-full col-span-12 mt-4">
        <div class="col-span-1">
            {{ include ('partials/elements/lightbox.twig') }}
        </div>
        <div class="col-span-5 flex items-start ">
            <p class="meta text-sm normal-case font-normal mt-2">{{trade.trade_description}}</p>
        </div>
    </div>


       {# CURRENT LEGS  #}

        <div class="legs mt-6 col-span-12 ">
            <h3 class="text-lg uppercase mt-6 text-brand-primary font-semibold tracking-widest">current legs</h3>
            {{ include ('partials/legs/legs-headers.twig') }}
            <ul class="">
                {% for leg in trade.legs %}
                    {% if leg.display == ('current') %}
                        {% if leg.type_of_update.value == ('update') %}
                            {{ include ('partials/legs/leg--update.twig') }}
                        {% else %}
                            {{ include ('partials/legs/leg--default.twig') }}
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </ul>
        </div>

        {% if haspast == true %}
            <div class="legs mt-6 col-span-12 p-2 px-4 bg-background-main rounded-lg" x-data="{ open: false }">
                <div class="flex justify-between legs-header" @click="open = !open">
                    <h3 class="text-md uppercase text-gray-dark font-semibold tracking-widest">past positions</h3>

                    {# //  THIS CONTROLS THE VISIBILITY #}
                    <div aria-label="expand list" class="" >
                        <i class="rotate-0 fas fa-chevron-down " x-bind:class="open == 1 ? 'rotate-180 transition-all duration-100 rotate-180 transform' : ''"></i>
                    </div>
                </div>
                <div class="legs-section" x-show="open" >
                    {{ include ('partials/legs/legs-headers_past.twig') }}
                    <ul class="">
                        {% for leg in trade.legs %}
                            {% if leg.display == ('past') %}
                                {% if leg.type_of_update.value == ('update') %}
                                    {{ include ('partials/legs/leg--update.twig') }}
                                {% else %}
                                    {{ include ('partials/legs/leg--default.twig') }}
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>
        {% endif %}



</article>

